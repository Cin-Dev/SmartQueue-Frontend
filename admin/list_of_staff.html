<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
	<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
		<c:if test="${empty sessionScope.sessionAdmin.getUsername()}">
			<c:redirect url="/" />
		</c:if>
		<!DOCTYPE html>

		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<script type="text/javascript" src="/scripts/jquery-3.7.1.min.js"></script>
			<script type="text/javascript" src="/scripts/fadetransition.js"></script>
			<link rel="stylesheet" href="/css/loader.css">
            <link rel="stylesheet" href="/css/list_of_staff.css">
			<title>Admin | List of Staff</title>
		</head>

		<body>
			<div class="container">
				<div class="navbar">
					<div class="logoContainer">
						<img src="/images/cec.png" alt="" class="logo">
						<p class="title">Cebu Eastern College
						<p>
					</div>
					<!-- admin profile -->
					<button class="button-profile" id="button-profile"><img src="/images/profile.png" alt=""
							class="profile">ADMIN<img src="/images/caretdown.png" alt="" class="caretdown"></button>
					<div class="adminProfile" id="adminProfile">
						<a href="">Settings</a>
						<a href="login.html">Signout</a>
					</div>

					<div class="menu-navbar">
						<div class="dropdown">
							<button class="dropdown-btn"><img src="/images/dashboard.png" alt=""
									class="dashboard-icon">Dashboard<img src="/images/caretright.png" alt=""
									class="caretright"></button>
							<div class="dropdown-dashboard">
								<a href="adminpage.html">Dashboard</a>
								<a href="">Total of Counter</a>
								<a href="">Total of Students</a>
							</div>
						</div>

						<div class="dropdown">
							<button class="dropdown-btn"><img src="/images/counter.png" alt=""
									class="counter-icon">Counter<img src="/images/caretright.png" alt=""
									class="caretright"></button>
							<div class="dropdown-dashboard">
								<a href="">Add Counter</a>
								<a href="list_of_counter.html">List of Counter</a>
							</div>
						</div>

						<div class="dropdown">
							<button class="dropdown-btn"><img src="/images/users.png" alt=""
									class="users-icon">Users<img src="/images/caretright.png" alt=""
									class="caretright"></button>
							<div class="dropdown-dashboard">
								<a href="">Add Student</a>
								<a href="">Add Staff</a>
								<a href="list_of_student.html">List of Student</a>
								<a href="list_of_staff.html">List of Staff</a>
							</div>
						</div>

						<div class="dropdown">
							<button class="dropdown-btn"><img src="/images/entertainment.png" alt=""
									class="entertainment-icon">Entertainment<img src="/images/caretright.png" alt=""
									class="caretright"></button>
							<div class="dropdown-dashboard">
								<a href="">Video advertisement</a>
							</div>
						</div>

						<div class="dropdown">
							<button class="dropdown-btn"><img src="/images/display.png" alt=""
									class="display-icon">Display<img src="/images/caretright.png" alt=""
									class="caretright"></button>
							<div class="dropdown-dashboard">
								<a href="/user/userinquiry.html">User Inquiry</a>
								<a href="">User Window</a>
								<a href="/staff/counter_window.html">Counter Window</a>
							</div>
						</div>
					</div>
				</div>
				<div class="stafflist-section">
					<div class="stafflist-content">
						<button class="add-account-btn"> <img src="/images/add-account.png" alt=""
								class="add-account-icon"> Add Staff</button>
						<h1>Staff List</h1>
						<div class="search-container">
							<form action="" method=""></form>
							<input type="text" placeholder="Search.." name="search" class="search-bar">
							<button class="search-btn" type="submit"><img src="/images/search-icon.png" alt=""
									class="search-icon"></button>
							</form>
						</div>

						<div class="overlay"></div>
						<div class="fillup-form-container modal">
							<h1>Signup</h1>
							<span class="close-btn">&times;</span>
							<div class="register-form">
								<form action="" method="post">
									<div class="input-container" style="width: 40%; margin: 0 20px 0 20px;">
										<input class="firstname-input" required="required" type="text" name="txtFirstname">
										<label for="firstname" class="firstname-label">First name</label>
									</div>
									<div class="input-container" style="width: 40%; margin: 0 20px 0 20px;">
										<input class="lastname-input" required="required" type="text" name="txtLastname">
										<label for="lastname" class="lastname-label">Last name</label>
									</div>
				
									<div class="input-container full-width" style="width: 40%; margin: 0 20px 0 20px;">
										<input class="username-input" required="required" type="text" name="txtUsername">
										<label for="username" class="username-label">Username</label>
									</div>
				
									<div class="input-container" style="width: 40%; margin: 0 20px 0 20px;">
										<input class="contactno-input" required="required" type="text" name="txtContactno">
										<label for="contactno" class="contactno-label">Contact no.</label>
									</div>
				
									<div class="input-container" style="width: 91%; margin-left: 20px;">
										<input class="email-input" required="required" type="text" name="txtEmail">
										<label for="email" class="email-label">Email</label>
									</div>
				
									<div class="input-container" style="width: 91%; margin-left: 20px;">
										<input class="password-input" required="required" type="password" name="txtPassword">
										<label for="password" class="password-label">Password</label>
									</div>
				
									<div class="input-container" style="width: 91%; margin-left: 20px;">
										<input class="confirmpassword-input" required="required" type="password" name="txtConfirmpassword">
										<label for="confirmpassword" class="confirmpassword-label">Confirm Password</label>
									</div>
				
									<input class="sign-btn" type="submit" value="Signup">
								</form>
							</div>
						</div>
					

						<table>
							<thead>
								<tr>
									<th>Id No.</th>
									<th>Name</th>
									<th>Contact no.</th>
									<th>Email</th>
									<th>Username</th>
									<th>Password</th>
									<th>Restriction</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody id="tablelist">
								<tr>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td>Loading data please wait...</td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>

				<script>
					var dropdown = document.getElementsByClassName("button-profile");
					var i;

					for (i = 0; i < dropdown.length; i++) {
						dropdown[i].addEventListener("click", function () {

							var dropdownContent = this.nextElementSibling;
							if (dropdownContent.style.display === "block") {
								dropdownContent.style.display = "none";
							} else {
								dropdownContent.style.display = "block";
							}
						});
					}


				</script>
				<script>
					var staffListInfo = document.getElementById("tablelist");


					function updateData() {
						var request = new XMLHttpRequest();
						request.open('GET', 'http://localhost:8080/smartqueueweb/JsonStaffListAPI');
						request.onload = function () {
							var data = JSON.parse(request.responseText);
							renderHTML(data);
						}
						request.send();
					}

					function renderHTML(data) {
						var htmlString = ``;

						for (var i = 0; i < data.length; i++) {

							htmlString += "<tr>";
							htmlString += "<td>" + data[i].staffID + "</td>";
							htmlString += "<td>" + data[i].firstname + "</td>";
							htmlString += "<td>+63" + data[i].contactNumber + "</td>";
							htmlString += "<td>" + data[i].email + "</td>";
							htmlString += "<td>" + data[i].username + "</td>";
							htmlString += "<td>" + data[i].password + "</td>";
							htmlString += "<td>" + (data[i].isLocked === 1 ? "Locked" : "Not Locked") + "</td>";
							htmlString += '<td><a href="update?staffId=' + data[i].staffID + '"><button class="update" style="background-color: #97BE5A;">Update</button></a> ';
							htmlString += '<a href="delete?staffId=' + data[i].staffID + '"><button class="delete" style="background-color: #EE4E4E;">Delete</button></a>';
							htmlString += "</tr>";
						}

						staffListInfo.innerHTML = htmlString;
					}

					setInterval(updateData, 2000);

				</script>
				 <script>
					// Get elements
					const addAccountButton = document.querySelector('.add-account-btn');
					const closeModalButton = document.querySelector('.close-btn');
					const modal = document.querySelector('.modal');
					const overlay = document.querySelector('.overlay');
			
					// Function to open the modal
					function openModal() {
						modal.classList.add('active');
						overlay.classList.add('active');
					}
			
					// Function to close the modal
					function closeModal() {
						modal.classList.remove('active');
						overlay.classList.remove('active');
					}
			
					// Event listeners
					addAccountButton.addEventListener('click', openModal);
					closeModalButton.addEventListener('click', closeModal);
					overlay.addEventListener('click', closeModal);
				</script>


				<div class="load-wrapper">
					<div class="main-loader">
						<div class="box-loader">
						</div>
					</div>
				</div>
		</body>

		</html>




		<!-- <h1>
					Welcome
					<c:out value="${admin}"></c:out>
					<c:out value="${sessionScope.sessionName}"></c:out>
				</h1>


				<form action=logout_Servlet method=get>
					<input type="submit" value="logout">
				</form>

				
		 -->